sample:
  name: Hello World
tests:
  sample.lua_zephyr.hello_world:
    harness: console
    extra_configs:
      - platform:mps2/an385:CONFIG_QEMU_ICOUNT=y
      - platform:qemu_x86:CONFIG_QEMU_ICOUNT=y
      - CONFIG_SHELL=n
      - CONFIG_THREAD_NAME=y
      - CONFIG_LOG_MODE_MINIMAL=y
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "-"
        - "Hello from lua thread"
        - "bye"
        - "heap:\\s+32768\\s+\\d+\\s+\\d+\\s+\\d+%"
        - "stack:\\s+\\d+\\s+\\d+\\s+\\d+\\s+\\d+%"
        - "Sample 01, finished successfully"
    tags: lua_zephyr
    integration_platforms:
      - qemu_x86
      - mps2/an385
