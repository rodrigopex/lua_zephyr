sample:
  name: Hello World Bytecode
tests:
  sample.lua_zephyr.hello_world_bytecode:
    harness: console
    extra_configs:
      - platform:mps2/an385:CONFIG_QEMU_ICOUNT=y
      - platform:qemu_x86:CONFIG_QEMU_ICOUNT=y
      - CONFIG_THREAD_NAME=y
      - CONFIG_LOG_MODE_MINIMAL=y
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "-"
        - "Pre-lua vm setup for hello world lua by the user"
        - "Hello from lua thread"
        - "bye"
        - "allocated 0, free \\d+, max allocated \\d+, heap size 32768"
        - "Sample 01, finished successfully"
    tags: lua_zephyr
    integration_platforms:
      - qemu_x86
      - mps2/an385
