sample:
  name: Heavy
tests:
  sample.lua_zephyr.heavy:
    harness: console
    timeout: 300
    extra_configs:
      - platform:mps2/an385:CONFIG_QEMU_ICOUNT=y
      - platform:qemu_x86:CONFIG_QEMU_ICOUNT=y
      - CONFIG_SHELL=n
    harness_config:
      type: multi_line
      ordered: false
      regex:
        - "Heavy load sample finished"
        - "heap:\\s+\\d{4,5}\\s+\\d+\\s+\\d+\\s+\\d+%"
        - "stack:\\s+\\d+\\s+\\d+\\s+\\d+\\s+\\d+%"
    tags: lua_zephyr
    integration_platforms:
      - qemu_x86
      - mps2/an385
